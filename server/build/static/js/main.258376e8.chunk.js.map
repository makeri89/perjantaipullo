{"version":3,"sources":["services/participants.jsx","components/WeeklyList.jsx","components/ParticipantForm.jsx","App.jsx","index.js"],"names":["baseUrl","getByWeek","week","a","axios","get","response","data","getWinner","addNew","participant","post","WeeklyList","initialWeek","useState","participants","setParticipants","winner","setWinner","prize","setPrize","setWeek","useEffect","then","result","type","value","onChange","e","target","id","map","p","name","_id","onClick","confirm","ParticipantForm","setName","onSubmit","preventDefault","required","App","view","setView","date","Date","setHours","yearFirst","getFullYear","days","Math","floor","currentWeek","round","viewChange","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.258376e8.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/participants'\n\nconst getAll = async () => {\n  const response = await axios.get(baseUrl)\n  return response.data\n}\n\nconst getByWeek = async (week) => {\n  const response = await axios.get(`${baseUrl}/${week}`)\n  return response.data\n}\n\nconst getWinner = async (week) => {\n  const response = await axios.get(`${baseUrl}/winner/${week}`)\n  return response.data\n}\n\nconst addNew = async (participant) => {\n  const response = await axios.post(baseUrl, participant)\n  return response.data\n}\n\nexport { getAll, getByWeek, getWinner, addNew }\n","/* eslint-disable indent */\nimport React, { useState, useEffect } from 'react'\n\nimport { getByWeek, getWinner } from '../services/participants'\n\nconst WeeklyList = ({ initialWeek }) => {\n  const [participants, setParticipants] = useState([])\n  const [winner, setWinner] = useState('')\n  const [prize, setPrize] = useState(0)\n  const [week, setWeek] = useState(initialWeek)\n\n  useEffect(() => {\n    getByWeek(week).then(result => setParticipants(result))\n  }, [week])\n\n  const handleLottery = () => {\n    if (confirm('Haluatko varmasti arpoa voittajan?\\nArvonnan voi suorittaa vain kerran.')) {\n      getWinner(week).then(result => {\n        setWinner(result.name)\n        setPrize(result.prize)\n      })\n    }\n  }\n\n  const handleWeekChange = (e) => {\n    setWeek(e.target.value)\n  }\n\n  return (\n    <div>\n      Viikko: <input type='text' value={week} onChange={handleWeekChange} id='week' /><br/>\n      <h2>Arvontaan osallistuvat viikolla {week}:</h2>\n      {participants.map(p => (\n        <div key={p._id}>\n          <p>{p.name}</p>\n        </div>\n      ))}\n      <button onClick={handleLottery}>Suorita arvonta</button><br/><br/>\n      {winner !== ''\n        ? <div>\n            <h3>Voittaja on:</h3>\n            <h4>{winner}</h4>\n            Palkinnon arvo: {prize} euroa\n          </div>\n        : ''}\n    </div>\n  )\n}\n\nexport default WeeklyList","import React, { useState } from 'react'\n\nimport { addNew } from '../services/participants'\n\nconst ParticipantForm = () => {\n  const [name, setName] = useState('')\n  const [week, setWeek] = useState('')\n\n  const handleNameChange = (e) => {\n    setName(e.target.value)\n  }\n\n  const handleWeekChange = (e) => {\n    setWeek(e.target.value)\n  }\n\n  const addParticipant = (e) => {\n    e.preventDefault()\n    addNew({ name, week })\n    setName('')\n    setWeek('')\n  }\n\n  return (\n    <div>\n      <h2>Lisää osallistuja</h2>\n      <form onSubmit={addParticipant}>\n        Nimi: <input type='text' value={name} onChange={handleNameChange} id='name' required /><br/>\n        Viikko: <input type='text' value={week} onChange={handleWeekChange} id='week' required /><br/>\n        <button type='submit'>Lisää</button>\n      </form>\n    </div>\n  )\n}\n\nexport default ParticipantForm","import React, { useState, useEffect } from 'react'\nimport WeeklyList from './components/WeeklyList'\nimport ParticipantForm from './components/ParticipantForm'\n\nconst App = () => {\n  const [week, setWeek] = useState(23)\n  const [view, setView] = useState(true)\n\n  useEffect(() => {\n    const date = new Date()\n    date.setHours(0,0,0,0) // sets new date to midnight\n    const yearFirst = new Date(date.getFullYear(), 0, 1)\n    const days = Math.floor((date - yearFirst) / (1000 * 60 * 60 * 24))\n    const currentWeek = Math.round((days + 4) / 7) // adding 4 starts a new week on saturday\n    setWeek(currentWeek)\n  }, [])\n\n  const viewChange = () => {\n    setView(!view)\n  }\n\n  return (\n    <div>\n      <h1>Perjantaipulloarvonta</h1>\n      <button onClick={viewChange}>Arvonta</button>\n      <button onClick={viewChange}>Lisää osallistuja</button>\n      {view === true\n        ? <WeeklyList initialWeek={week} />\n        : <ParticipantForm />}\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}