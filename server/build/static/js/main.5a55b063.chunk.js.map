{"version":3,"sources":["components/styled.js","services/participants.jsx","components/WeeklyList.jsx","components/ParticipantForm.jsx","App.jsx","index.js"],"names":["Title","styled","h1","SubTitle","h2","H3","h3","H4","h4","Button","button","Root","div","Input","input","WeekInput","baseUrl","getByWeek","week","a","axios","get","response","data","getWinner","addNew","participant","post","WeeklyList","initialWeek","useState","participants","setParticipants","winner","setWinner","prize","setPrize","setWeek","useEffect","then","result","pickWinner","name","as","type","value","onChange","e","target","id","map","p","_id","onClick","confirm","setTimeout","ParticipantForm","setName","onSubmit","preventDefault","required","App","view","setView","date","Date","setHours","yearFirst","getFullYear","days","Math","floor","round","getCurrentWeek","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5a55b063.chunk.js","sourcesContent":["import styled from 'styled-components'\n\nexport const Title = styled.h1`\n  padding: 15px 0 0 0;\n  margin-bottom: -20px;\n`\n\nexport const SubTitle = styled.h2`\n  margin: 0 0 -5px 0;\n`\n\nexport const H3 = styled.h3`\n  font-size: 1.5em;\n  margin: -8px;\n`\n\nexport const H4 = styled.h4`\n  font-size: 1.3em;\n  margin: -8px;\n`\n\nexport const Button = styled.button`\n  color: #e81438;\n  margin: 0 1em;\n  padding: 0.25em 1em;\n  border: 2px solid #e81438;\n  border-radius: 5px;\n  background-color: white;\n`\n\nexport const Root = styled.div`\n  text-align: center;\n  color: #e81438;\n  font-family: 'Baloo Tammudu 2', cursive;\n  background: papayawhip;\n`\n\nexport const Input = styled.input`\n  margin: 5px;\n`\n\nexport const WeekInput = styled(Input)`\n  width: 20px;\n`","import axios from 'axios'\nconst baseUrl = '/api/participants'\n\nconst getAll = async () => {\n  const response = await axios.get(baseUrl)\n  return response.data\n}\n\nconst getByWeek = async (week) => {\n  const response = await axios.get(`${baseUrl}/${week}`)\n  return response.data\n}\n\nconst getWinner = async (week) => {\n  const response = await axios.get(`${baseUrl}/winner/${week}`)\n  return response.data\n}\n\nconst addNew = async (participant) => {\n  const response = await axios.post(baseUrl, participant)\n  return response.data\n}\n\nexport { getAll, getByWeek, getWinner, addNew }\n","/* eslint-disable indent */\nimport React, { useState, useEffect } from 'react'\n\nimport { Button, SubTitle, WeekInput, H3, H4 } from '../components/styled'\nimport { getByWeek, getWinner } from '../services/participants'\n\nconst WeeklyList = ({ initialWeek }) => {\n  const [participants, setParticipants] = useState([])\n  const [winner, setWinner] = useState('')\n  const [prize, setPrize] = useState(0)\n  const [week, setWeek] = useState(initialWeek)\n\n  useEffect(() => {\n    getByWeek(week).then(result => setParticipants(result))\n  }, [week])\n\n  const handleLottery = () => {\n    if (confirm('Haluatko varmasti arpoa voittajan?\\nArvonnan voi suorittaa vain kerran.')) {\n      setTimeout(pickWinner, 3000)\n    }\n  }\n\n  const pickWinner = () => {\n    getWinner(week).then(result => {\n      setWinner(result.name)\n      setPrize(result.prize)\n    })\n  }\n\n  const handleWeekChange = (e) => {\n    setWeek(e.target.value)\n  }\n\n  return (\n    <div>\n      Viikko: <WeekInput as='input' type='text' value={week} onChange={handleWeekChange} id='week' /><br/>\n      <SubTitle>Arvontaan osallistuvat viikolla {week}:</SubTitle>\n      {participants.map(p => (\n        <div key={p._id}>\n          {p.name}\n        </div>\n      ))}\n      <Button as='button' onClick={handleLottery}>Suorita arvonta</Button><br/><br/>\n      {winner !== ''\n        ? <div>\n            <H3>Voittaja on:</H3>\n            <H4>{winner}</H4>\n            Palkinnon arvo: {prize} euroa\n          </div>\n        : ''}\n    </div>\n  )\n}\n\nexport default WeeklyList","import React, { useState } from 'react'\n\nimport { Button, Input } from '../components/styled'\nimport { addNew } from '../services/participants'\n\nconst ParticipantForm = () => {\n  const [name, setName] = useState('')\n  const [week, setWeek] = useState('')\n\n  const handleNameChange = (e) => {\n    setName(e.target.value)\n  }\n\n  const handleWeekChange = (e) => {\n    setWeek(e.target.value)\n  }\n\n  const addParticipant = (e) => {\n    e.preventDefault()\n    addNew({ name, week })\n    setName('')\n    setWeek('')\n  }\n\n  return (\n    <div>\n      <h2>Lisää osallistuja</h2>\n      <form onSubmit={addParticipant}>\n        Nimi: <Input as='input' type='text' value={name} onChange={handleNameChange} id='name' required /><br/>\n        Viikko: <Input as='input' type='text' value={week} onChange={handleWeekChange} id='week' required /><br/>\n        <Button as='button' type='submit'>Lisää</Button>\n      </form>\n    </div>\n  )\n}\n\nexport default ParticipantForm","import React, { useState } from 'react'\nimport WeeklyList from './components/WeeklyList'\nimport ParticipantForm from './components/ParticipantForm'\nimport { Title, Button, Root } from './components/styled'\n\nconst App = () => {\n  const [view, setView] = useState(true)\n\n  const getCurrentWeek = () => {\n    const date = new Date()\n    date.setHours(0,0,0,0) // sets new date to midnight\n    const yearFirst = new Date(date.getFullYear(), 0, 1)\n    const days = Math.floor((date - yearFirst) / (1000 * 60 * 60 * 24))\n    const currentWeek = Math.round((days + 4) / 7) // adding 4 starts a new week on saturday\n    return currentWeek\n  }\n\n  const week = getCurrentWeek()\n\n  return (\n    <Root>\n      <Title>Perjantaipulloarvonta</Title>\n      <Button as='button' onClick={() => setView(true)}>Arvonta</Button>\n      <Button as='button' onClick={() => setView(false)}>Lisää osallistuja</Button>\n      {view === true\n        ? <WeeklyList initialWeek={week} />\n        : <ParticipantForm />}\n    </Root>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}