{"version":3,"sources":["services/participants.jsx","components/WeeklyList.jsx","components/ParticipantForm.jsx","App.jsx","index.js"],"names":["baseUrl","getByWeek","week","a","axios","get","response","data","getWinner","addNew","participant","post","WeeklyList","initialWeek","useState","participants","setParticipants","winner","setWinner","setWeek","useEffect","then","result","type","value","onChange","e","target","id","map","p","name","_id","onClick","ParticipantForm","setName","onSubmit","preventDefault","required","App","view","setView","date","Date","setHours","yearFirst","getFullYear","days","Math","floor","currentWeek","round","viewChange","ReactDOM","render","document","getElementById"],"mappings":"kLACMA,EAAU,oBAOVC,EAAS,uCAAG,WAAOC,GAAP,eAAAC,EAAA,sEACOC,IAAMC,IAAN,UAAaL,EAAb,YAAwBE,IAD/B,cACVI,EADU,yBAETA,EAASC,MAFA,2CAAH,sDAKTC,EAAS,uCAAG,WAAON,GAAP,eAAAC,EAAA,sEACOC,IAAMC,IAAN,UAAaL,EAAb,mBAA+BE,IADtC,cACVI,EADU,yBAETA,EAASC,MAFA,2CAAH,sDAKTE,EAAM,uCAAG,WAAOC,GAAP,eAAAP,EAAA,sEACUC,IAAMO,KAAKX,EAASU,GAD9B,cACPJ,EADO,yBAENA,EAASC,MAFH,2CAAH,sD,OCoBGK,EAlCI,SAAC,GAAqB,IAAnBC,EAAkB,EAAlBA,YACpB,EAAwCC,mBAAS,IAAjD,mBAAOC,EAAP,KAAqBC,EAArB,KACA,EAA4BF,mBAAS,IAArC,mBAAOG,EAAP,KAAeC,EAAf,KACA,EAAwBJ,mBAASD,GAAjC,mBAAOX,EAAP,KAAaiB,EAAb,KAEAC,qBAAU,WACRnB,EAAUC,GAAMmB,MAAK,SAAAC,GAAM,OAAIN,EAAgBM,QAC9C,CAACpB,IAUJ,OACE,2CACU,uBAAOqB,KAAK,OAAOC,MAAOtB,EAAMuB,SANnB,SAACC,GACxBP,EAAQO,EAAEC,OAAOH,QAKqDI,GAAG,SAAS,uBAChF,kEAAqC1B,EAArC,OACCa,EAAac,KAAI,SAAAC,GAAC,OACjB,8BACE,4BAAIA,EAAEC,QADED,EAAEE,QAId,wBAAQC,QAjBU,WACpBzB,EAAUN,GAAMmB,MAAK,SAAAC,GAAM,OAAIJ,EAAUI,EAAOS,UAgB9C,6BAAwD,uBAAK,uBAE7D,8CACCd,MCEQiB,EA/BS,WACtB,MAAwBpB,mBAAS,IAAjC,mBAAOiB,EAAP,KAAaI,EAAb,KACA,EAAwBrB,mBAAS,IAAjC,mBAAOZ,EAAP,KAAaiB,EAAb,KAiBA,OACE,gCACE,yDACA,uBAAMiB,SAVa,SAACV,GACtBA,EAAEW,iBACF5B,EAAO,CAAEsB,OAAM7B,SACfiC,EAAQ,IACRhB,EAAQ,KAMN,mBACQ,uBAAOI,KAAK,OAAOC,MAAOO,EAAMN,SAnBnB,SAACC,GACxBS,EAAQT,EAAEC,OAAOH,QAkBqDI,GAAG,OAAOU,UAAQ,IAAG,uBADzF,WAEU,uBAAOf,KAAK,OAAOC,MAAOtB,EAAMuB,SAhBrB,SAACC,GACxBP,EAAQO,EAAEC,OAAOH,QAeuDI,GAAG,OAAOU,UAAQ,IAAG,uBACzF,wBAAQf,KAAK,SAAb,gCCIOgB,EA7BH,WACV,MAAwBzB,mBAAS,GAAjC,mBAAOZ,EAAP,KAAaiB,EAAb,KACA,EAAwBL,oBAAS,GAAjC,mBAAO0B,EAAP,KAAaC,EAAb,KAEArB,qBAAU,WACR,IAAMsB,EAAO,IAAIC,KACjBD,EAAKE,SAAS,EAAE,EAAE,EAAE,GACpB,IAAMC,EAAY,IAAIF,KAAKD,EAAKI,cAAe,EAAG,GAC5CC,EAAOC,KAAKC,OAAOP,EAAOG,GAAR,OAClBK,EAAcF,KAAKG,OAAOJ,EAAO,GAAK,GAC5C5B,EAAQ+B,KACP,IAEH,IAAME,EAAa,WACjBX,GAASD,IAGX,OACE,gCACE,uDACA,wBAAQP,QAASmB,EAAjB,qBACA,wBAAQnB,QAASmB,EAAjB,sCACU,IAATZ,EACG,cAAC,EAAD,CAAY3B,YAAaX,IACzB,cAAC,EAAD,QCxBVmD,IAASC,OACP,cAAC,EAAD,IACAC,SAASC,eAAe,W","file":"static/js/main.fa05df99.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/participants'\n\nconst getAll = async () => {\n  const response = await axios.get(baseUrl)\n  return response.data\n}\n\nconst getByWeek = async (week) => {\n  const response = await axios.get(`${baseUrl}/${week}`)\n  return response.data\n}\n\nconst getWinner = async (week) => {\n  const response = await axios.get(`${baseUrl}/winner/${week}`)\n  return response.data\n}\n\nconst addNew = async (participant) => {\n  const response = await axios.post(baseUrl, participant)\n  return response.data\n}\n\nexport { getAll, getByWeek, getWinner, addNew }\n","import React, { useState, useEffect } from 'react'\n\nimport { getByWeek, getWinner } from '../services/participants'\n\nconst WeeklyList = ({ initialWeek }) => {\n  const [participants, setParticipants] = useState([])\n  const [winner, setWinner] = useState('')\n  const [week, setWeek] = useState(initialWeek)\n\n  useEffect(() => {\n    getByWeek(week).then(result => setParticipants(result))\n  }, [week])\n\n  const handleLottery = () => {\n    getWinner(week).then(result => setWinner(result.name))\n  }\n\n  const handleWeekChange = (e) => {\n    setWeek(e.target.value)\n  }\n\n  return (\n    <div>\n      Viikko: <input type='text' value={week} onChange={handleWeekChange} id='week' /><br/>\n      <h2>Arvontaan osallistuvat viikolla {week}:</h2>\n      {participants.map(p => (\n        <div key={p._id}>\n          <p>{p.name}</p>\n        </div>\n      ))}\n      <button onClick={handleLottery}>Suorita arvonta</button><br/><br/>\n\n      <h3>Voittaja on:</h3>\n      {winner}\n    </div>\n  )\n}\n\nexport default WeeklyList","import React, { useState } from 'react'\n\nimport { addNew } from '../services/participants'\n\nconst ParticipantForm = () => {\n  const [name, setName] = useState('')\n  const [week, setWeek] = useState('')\n\n  const handleNameChange = (e) => {\n    setName(e.target.value)\n  }\n\n  const handleWeekChange = (e) => {\n    setWeek(e.target.value)\n  }\n\n  const addParticipant = (e) => {\n    e.preventDefault()\n    addNew({ name, week })\n    setName('')\n    setWeek('')\n  }\n\n  return (\n    <div>\n      <h2>Lisää osallistuja</h2>\n      <form onSubmit={addParticipant}>\n        Nimi: <input type='text' value={name} onChange={handleNameChange} id='name' required /><br/>\n        Viikko: <input type='text' value={week} onChange={handleWeekChange} id='week' required /><br/>\n        <button type='submit'>Lisää</button>\n      </form>\n    </div>\n  )\n}\n\nexport default ParticipantForm","import React, { useState, useEffect } from 'react'\nimport WeeklyList from './components/WeeklyList'\nimport ParticipantForm from './components/ParticipantForm'\n\nconst App = () => {\n  const [week, setWeek] = useState(0)\n  const [view, setView] = useState(true)\n\n  useEffect(() => {\n    const date = new Date()\n    date.setHours(0,0,0,0) // sets new date to midnight\n    const yearFirst = new Date(date.getFullYear(), 0, 1)\n    const days = Math.floor((date - yearFirst) / (1000 * 60 * 60 * 24))\n    const currentWeek = Math.round((days + 4) / 7) // adding 4 starts a new week on saturday\n    setWeek(currentWeek)\n  }, [])\n\n  const viewChange = () => {\n    setView(!view)\n  }\n\n  return (\n    <div>\n      <h1>Perjantaipulloarvonta</h1>\n      <button onClick={viewChange}>Arvonta</button>\n      <button onClick={viewChange}>Lisää osallistuja</button>\n      {view === true\n        ? <WeeklyList initialWeek={week} />\n        : <ParticipantForm />}\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}